{% extends "admin/base_site.html" %}
{% load i18n admin_urls %}

{% block content %}
<div class="content">
    <h1>{{ title }}</h1>
    <p>Você está prestes a <strong>zerar para replantio</strong> os registros abaixo. Esta ação irá:</p>
    <ul>
        <li>Desativar todos os <em>PlantioExtratoArea</em> relacionados (ativo=False)</li>
        <li>Resetar status/datas e definir <code>area_colheita = area_planejamento_plantio</code></li>
        <li>Limpar todo o cache</li>
    </ul>

    {% if select_across %}
    <p><strong>Observação:</strong> A ação será aplicada a <em>todos</em> os itens que correspondem aos filtros atuais.
    </p>
    {% endif %}

    <h3>Itens selecionados:</h3>
    <ul>
        {% for obj in queryset %}
        <li>{{ obj }}</li>
        {% endfor %}
    </ul>

    <form method="post" style="margin-top: 1rem;">
        {% csrf_token %}
        <input type="hidden" name="action" value="{{ action }}">
        <input type="hidden" name="index" value="{{ index }}">
        {% if select_across %}
        <input type="hidden" name="select_across" value="1">
        {% endif %}

        {# Repassa todos os IDs selecionados (quando não é select_across) #}
        {% for pk in selected %}
        <input type="hidden" name="{{ action_checkbox_name }}" value="{{ pk }}">
        {% endfor %}

        <input type="hidden" name="confirm" value="yes">

        <div class="submit-row">
            <input type="submit" class="default" value="{% trans 'Confirmar' %}">
            <a href="{{ request.get_full_path }}" class="button">{% trans "Cancelar" %}</a>
        </div>
    </form>
</div>
{% endblock %}